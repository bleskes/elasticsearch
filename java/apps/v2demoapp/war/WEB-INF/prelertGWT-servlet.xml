<?xml version="1.0" encoding="UTF-8"?>

<beans 	xmlns="http://www.springframework.org/schema/beans"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xmlns:aop="http://www.springframework.org/schema/aop"
		xsi:schemaLocation="
		http://www.springframework.org/schema/beans
			http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
		http://www.springframework.org/schema/aop 
			http://www.springframework.org/schema/aop/spring-aop-2.5.xsd">
					
	<!-- the application context definition for the prelert DispatcherServlet -->
	

	<bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
	
<!--		<property name="interceptors">-->
<!--			<list>-->
<!--				<ref bean="validSessionInterceptor"/>-->
<!--			</list>-->
<!--		</property>-->
	
		<property name="urlMap">
			<map>
				<entry key="causalityQueryService">
					<ref bean="causalityViewServiceController"/>
				</entry>
				<entry key="evidenceQueryService">
					<ref bean="evidenceViewServiceController"/>
				</entry>
				<entry key="exceptionQueryService">
					<ref bean="exceptionViewServiceController"/>
				</entry>
				<entry key="logoutService">
					<ref bean="logoutController"/>
				</entry>
				<entry key="statesQueryService">
					<ref bean="serviceController"/>
				</entry>
				<entry key="timeSeriesGXTPagingService">
					<ref bean="timeSeriesGXTPagingServiceController"/>
				</entry>
				<entry key="usageQueryService/IPC">
					<ref bean="ipcUsageViewServiceController"/>
				</entry>
				<entry key="usageQueryService/Services">
					<ref bean="serviceUsageViewServiceController"/>
				</entry>
				<entry key="usageQueryService/Users">
					<ref bean="userUsageViewServiceController"/>
				</entry>
				<entry key="viewDirectoryService">
					<ref bean="viewDirectoryServiceController"/>
				</entry>
			</map>
		</property>
	</bean> 
	
	<bean id="validSessionInterceptor" class="com.prelert.web.ValidSessionInterceptor">
		<property name="loginPage" value="redirect:/DesktopApp.html"/>
	</bean>
	
	<bean id="causalityViewServiceController" class="com.prelert.web.ServletWrappingController" >
		<property name="servletName" value="causalityQueryService"/>
		<property name="servletInstance">
			<ref bean="causalityQueryService"/>
		</property>
	</bean>
	
	<bean id="evidenceViewServiceController" class="com.prelert.web.ServletWrappingController" >
		<property name="servletName" value="evidenceQueryService"/>
		<property name="servletInstance">
			<ref bean="evidenceQueryService"/>
		</property>
	</bean>
	
	<bean id="exceptionViewServiceController" class="com.prelert.web.ServletWrappingController" >
		<property name="servletName" value="exceptionQueryService"/>
		<property name="servletInstance">
			<ref bean="exceptionQueryService"/>
		</property>
	</bean>
	
	<bean id="logoutController" class="com.prelert.web.LogoutController">
		<property name="loginPage" value="redirect:/DesktopApp.html"/>
	</bean>
	
	<bean id="timeSeriesGXTPagingServiceController" class="com.prelert.web.ServletWrappingController" >
		<property name="servletName" value="timeSeriesGXTPagingService"/>
		<property name="servletInstance">
			<ref bean="timeSeriesGXTPagingService"/>
		</property>
	</bean>
	
	<bean id="serviceController" class="com.prelert.web.ServletWrappingController" >
		<property name="servletName" value="statesQueryService"/>
		<property name="servletInstance">
			<ref bean="statesQueryService"/>
		</property>
	</bean>
	
	<bean id="ipcUsageViewServiceController" class="com.prelert.web.ServletWrappingController" >
		<property name="servletName" value="ipcUsageQueryService"/>
		<property name="servletInstance">
			<ref bean="ipcUsageQueryService"/>
		</property>
	</bean>
	
	<bean id="serviceUsageViewServiceController" class="com.prelert.web.ServletWrappingController" >
		<property name="servletName" value="serviceUsageQueryService"/>
		<property name="servletInstance">
			<ref bean="serviceUsageQueryService"/>
		</property>
	</bean>
	
	<bean id="userUsageViewServiceController" class="com.prelert.web.ServletWrappingController" >
		<property name="servletName" value="userUsageQueryService"/>
		<property name="servletInstance">
			<ref bean="userUsageQueryService"/>
		</property>
	</bean>
	
	<bean id="viewDirectoryServiceController" class="com.prelert.web.ServletWrappingController" >
		<property name="servletName" value="viewDirectoryService"/>
		<property name="servletInstance">
			<ref bean="viewDirectoryService"/>
		</property>
	</bean>	
	
	
	<bean id="causalityQueryService" class="demo.app.server.CausalityQueryServiceImpl">
		<property name="causalityDAO" ref="causalityDAO"/>
	</bean>
	
	<bean id="evidenceQueryService" class="demo.app.server.EvidenceQueryServiceImpl">
		<property name="evidenceDAO" ref="evidenceDAO"/>
	</bean>
	
	<bean id="exceptionQueryService" class="demo.app.server.ExceptionQueryServiceImpl">
		<property name="exceptionDAO" ref="exceptionDAO"/>
	</bean>
	
	<bean id="statesQueryService" class="demo.app.server.StatesQueryServiceImpl">
		<property name="evidenceDAO" ref="evidenceDAO"/>
	</bean>
	
	<bean id="timeSeriesGXTPagingService" class="demo.app.server.TimeSeriesGXTPagingServiceImpl">
		<property name="timeSeriesDAO" ref="timeSeriesDAO"/>
	</bean>

	<bean id="ipcUsageQueryService" class="demo.app.server.UsageQueryServiceImpl">
		<property name="usageViewDAO" ref="ipcUsageViewDAO"/>
	</bean>

	<bean id="serviceUsageQueryService" class="demo.app.server.UsageQueryServiceImpl">
		<property name="usageViewDAO" ref="serviceUsageViewDAO"/>
	</bean>
	
	<bean id="userUsageQueryService" class="demo.app.server.UsageQueryServiceImpl">
		<property name="usageViewDAO" ref="userUsageViewDAO"/>
	</bean>

	<bean id="viewDirectoryService" class="demo.app.server.ViewDirectoryServiceImpl">
		<property name="viewDirectory" ref="viewDirectory"/>
		<property name="evidenceDAO" ref="evidenceDAO"/>
	</bean>
	
</beans>